<% SWITCH cmd %>
<% CASE 'USER_NOT_FOUND' %>
{
    "sendMessage": {
        "text": "üîê <b>–ë–æ—Ç –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ VPN –∫–ª—é—á–∏–∫–æ–≤</b>",
        "reply_markup": {
            "inline_keyboard": [
                [
                    {
                        "text": "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å...",
                        "callback_data": "/register {{ args.1 }}"
                    }
                ]
            ]
        }
    }
}
<% CASE '/register' %>
{
    "deleteMessage": { "message_id": {{ message.message_id }} }
},
{
    "shmRegister": {
        "partner_id": "{{ args.0 }}",
        "callback_data": "/pricelist",
        "error": "–û–®–ò–ë–ö–ê: –õ–æ–≥–∏–Ω {{ message.chat.username }} –∏–ª–∏ chat_id {{ message.chat.id }} —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"
    }
}
<% CASE ['/start', '/menu', 'üåç –ì–ª–∞–≤–Ω–æ–µ –ú–µ–Ω—é'] %>
{{ IF cmd == '/menu' OR cmd == '–ú–µ–Ω—é' }}
{
    "deleteMessage": { "message_id": {{ message.message_id }} }
},
{{ END }}
{
    "sendMessage": {
        "text":"–ú–µ–Ω—é",
        "parse_mode": "HTML",
        "reply_markup": {
            "keyboard": [
				[
                    {"text": "üåç –ì–ª–∞–≤–Ω–æ–µ –ú–µ–Ω—é"}
                ],
                [
                    {"text": "üí∞ –ë–∞–ª–∞–Ω—Å"},
                    {"text": "üöÄ –°–ø–∏—Å–æ–∫ VPN –∫–ª—é—á–µ–π"}
                ],
				[
                    {"text": "üöÄ –û –°–µ—Ä–≤–∏—Å–µ"}
                ],
                [
                    {"text": "ü§ù –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞"},
                    {"text": "üì° –ü–æ–º–æ—â—å"}
                ],
				[
                    {"text": "‚ò¢ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –£—Å–ª—É–≥–∏"}
                ]
            ],
            "one_time_keyboard": false,
            "resize_keyboard": true
        }
    }
},
{
    "sendMessage": {
        "text": "üëãüèΩ <b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</b> <b><u>{{ user.full_name }}</u></b> .\n           üåê             <b>Service RU VPN</b>           üåê          \n\n üî• <b><u>–£ –Ω–∞—Å —Å–∞–º—ã–µ –Ω–∏–∑–∫–∏–µ —Ü–µ–Ω—ã –Ω–∞ —Ä—ã–Ω–∫–µ!</u></b>  üî•\n   *** <u> <i>–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º Wireguard  –∏ XRAY-Core –ü–†–û–¢–û–ö–û–õ–´</i> </u> ***\n\n ü§ù –ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞\n –ü—Ä–∏–≤–æ–¥–∏ –¥—Ä—É–∑–µ–π –∏ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π <b>{{ config.billing.partner.income_percent }}%</b>\n\n\n <b>–î–µ–π—Å—Ç–≤—É–µ—Ç —Ç–µ—Å—Ç–æ–≤–∞—è —É—Å–ª—É–≥–∞ 10/–¥–Ω–µ–π</b> ü§ù\n\n\nVPN –≤ —á–∞—Å—Ç–Ω–æ–º –æ–±–ª–∞–∫–µ, —á—Ç–æ–±—ã —É —Ç–µ–±—è –±—ã–ª–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–≤–æ–±–æ–¥–Ω–æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–æ–≤–∞—Ç—å –∏ –ø–æ–ª—É—á–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–≤–æ–∏–º —Å–æ—Ü. —Å–µ—Ç—è–º –∏ –±–∞–Ω–∫–∞–º –∏–∑ –ª—é–±–æ–π —Å—Ç—Ä–∞–Ω—ã, –∞ —Ç–∞–∫–∂–µ –∏–∑–±–∞–≤–∏—Ç—å —Ç–µ–±—è –æ—Ç:\n\nüò• –∑–∞–≤–∏—Å–∞—é—â–∏—Ö –≤–∏–¥–µ–æ –≤ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω–æ–π —Å–µ—Ç–∏\nüò• –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π\nüò° –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∫–ª–∞–º—ã\nüò± —Ä–∏—Å–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏–∑-–∑–∞ —á–∞—Å—Ç–æ–π —Å–º–µ–Ω—ã IP-–∞–¥—Ä–µ—Å–∞\nü§¨ —É—Ç–µ–∫–∞—é—â–µ–≥–æ –∑–∞—Ä—è–¥–∞ –±–∞—Ç–∞—Ä–µ–∏ –Ω–∞ –ø—Ä–æ–±–Ω—ã—Ö VPN\n\n\nüîå<b>–ü–æ–¥–∫–ª—é—á–∏—à—å—Å—è -></b> –∏ —Å—Ä–∞–∑—É –æ—Ü–µ–Ω–∏—à—å –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ù–ê–®–ï–ì–û VPN! –Ω–∞ —Å–≤–æ–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ!\n\n –°–∫–∞—á–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: <a href=\"{{ config.apk.download }}\">üåêServRU VPN Android</a>",
        "reply_markup": {
        
        }
    }
}
<% CASE ['/balance', 'üí∞ –ë–∞–ª–∞–Ω—Å'] %>
{
    "deleteMessage": { "message_id": {{ message.message_id }} }
},
{
    "sendMessage": {
        "text": "üí∞ <b>–ë–∞–ª–∞–Ω—Å</b>: {{ user.balance }}\n\n–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–ø–ª–∞—Ç–∏—Ç—å: <b>{{ user.pays.forecast.total }}</b>",
        "reply_markup" : {
            "inline_keyboard": [
                [
					{
                        "text": "‚úö –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å",
                        "web_app": {
                            "url": "https://yoomoney.ru/quickpay/shop-widget?writer=seller&targets=%D0%9E%D0%BF%D0%BB%D0%B0%D1%82%D0%B0%20%D0%BF%D0%BE%20%D0%B4%D0%BE%D0%B3%D0%BE%D0%B2%D0%BE%D1%80%D1%83%20{{ user.id }}&targets-hint=&default-sum={{ user.pays.forecast.total }}&label={{ user.id }}&button-text=12&payment-type-choice=on&hint=&successURL=&quickpay=shop&account={{ config.pay_systems.yoomoney.account }}"
                        }
                    }
					
                ],
                [
                    {
                        "text": "‚ò∞ –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π",
                        "callback_data": "/pays"
                    }
                ],
                [
                    {
                        "text": "‚á¶ –ù–∞–∑–∞–¥",
                        "callback_data": "/menu"
                    }
                ]
            ]
        }
    }
}
<% CASE ['/list', 'üöÄ –°–ø–∏—Å–æ–∫ VPN –∫–ª—é—á–µ–π'] %>
{
    "deleteMessage": { "message_id": {{ message.message_id }} }
},
{
    "sendMessage": {
        "text": "üöÄ <b>{{ user.full_name }}!</b> –í—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á –∏–ª–∏ –ø—Ä–æ–¥–ª–∏—Ç—å –æ–¥–∏–Ω –∏–∑ –∏–º–µ—é—â–∏—Ö—Å—è?",
        "reply_markup" : {
            "inline_keyboard": [
                {{ FOR item IN ref( user.services.list_for_api( 'category', 'vpn-%' ) ) }}
                {{ SWITCH item.status }}
                  {{ CASE 'ACTIVE' }}
                  {{ icon = '‚úÖ' }}
                  {{ status = '–†–∞–±–æ—Ç–∞–µ—Ç' }}
                  {{ CASE 'BLOCK' }}
                  {{ icon = '‚ùå' }}
                  {{ status = '–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞' }}
                  {{ CASE 'NOT PAID' }}
                  {{ icon = 'üí∞' }}
                  {{ status = '–û–∂–∏–¥–∞–µ—Ç –æ–ø–ª–∞—Ç—ã' }}
                  {{ CASE }}
                  {{ icon = '‚è≥' }}
                  {{ status = '–û–±—Ä–∞–±–æ—Ç–∫–∞' }}
                {{ END }}
                [
                    {
                        "text": "{{ item.name }} - {{ icon }} {{ status }} {{ end_date }}",
                        "callback_data": "/service {{ item.user_service_id }}"
                    }
                ],
                {{ END }}
                [
                    {
                        "text": "‚úö –ö—É–ø–∏—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á",
                        "callback_data": "/pricelist"
                    }
                ],
                [
                    {
                        "text": "‚á¶ –ù–∞–∑–∞–¥",
                        "callback_data": "/menu"
                    }
                ]
            ]
        }
    }
}
<% CASE '/service' %>
{{ us = user.services.list_for_api( 'usi', args.0 ) }}
{
    "deleteMessage": { "message_id": {{ message.message_id }} }
},
{
    "sendMessage": {
        {{ SWITCH us.status }}
          {{ CASE 'ACTIVE' }}
          {{ icon = '‚úÖ' }}
          {{ status = '–†–∞–±–æ—Ç–∞–µ—Ç' }}
          {{ CASE 'BLOCK' }}
          {{ icon = '‚ùå' }}
          {{ status = '–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞' }}
          {{ CASE 'NOT PAID' }}
          {{ icon = 'üí∞' }}
          {{ status = '–û–∂–∏–¥–∞–µ—Ç –æ–ø–ª–∞—Ç—ã' }}
          {{ CASE }}
          {{ icon = '‚è≥' }}
          {{ status = '–û–±—Ä–∞–±–æ—Ç–∫–∞' }}
            {{ end_date = '–¥–æ'  _ item.withdraw.end_date }}
        {{ END }}
        "text": "<b>–£—Å–ª—É–≥–∞</b>: {{ us.name }}{{ IF us.expire }}\n\n<b>–û–ø–ª–∞—á–µ–Ω–∞ –¥–æ</b>: {{ us.expire }}{{ END }}\n\n<b>–°—Ç–∞—Ç—É—Å</b>: {{ icon}} {{ status }}",
        "reply_markup" : {
            "inline_keyboard": [
                {{ IF us.status == 'ACTIVE' }}
                {{ subscription_url = storage.read('name','vpn_mrzb_' _ args.0 ).subscription_url }}

                {{ IF us.category.grep('^vpn-mz-').first }}
                {{ IF subscription_url.grep('^https:').first }}
                [
                    {
                        "text": "–ü–æ–∫–∞–∑–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è",
                        "web_app": {
                            "url": "{{ subscription_url }}"
                        }
                    }
                ],
                [
                    {
                        "text": "–ü–æ–∫–∞–∑–∞—Ç—å —Å—Å—ã–ª–∫—É –ø–æ–¥–ø–∏—Å–∫–∏",
                        "callback_data": "/show_mz_keys {{ args.0 }}"
                    }
                ],
                {{ ELSE }}
                [
                    {
                        "text": "–û–®–ò–ë–ö–ê: –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ SSL –¥–ª—è Marzban",
                        "callback_data": "/menu"
                    }
                ],
                {{ END }}
                {{ ELSE }}
                [
                    {
                        "text": "üóù  –°–∫–∞—á–∞—Ç—å –∫–ª—é—á",
                        "callback_data": "/download_qr {{ args.0 }}"
                    },
                    {
                        "text": "üëÄ –ü–æ–∫–∞–∑–∞—Ç—å QR –∫–æ–¥",
                        "callback_data": "/show_qr {{ args.0 }}"
                    }
                ],
                {{ END }}

                {{ END }}
                {{ IF us.status == 'NOT PAID' || us.status == 'BLOCK' }}
                [
                    {
                        "text": "üí∞ –û–ø–ª–∞—Ç–∏—Ç—å",
                        "callback_data": "/balance"
                    }
                ],
                {{ END }}
                {{ IF us.status != 'PROGRESS' }}
                [
                    {
                        "text": "‚ùå –£–¥–∞–ª–∏—Ç—å –∫–ª—é—á",
                        "callback_data": "/delete {{ args.0 }}"
                    }
                ],
                {{ END }}
                [
                    {
                        "text": "‚á¶ –ù–∞–∑–∞–¥",
                        "callback_data": "/list"
                    }
                ]
            ]
        }
    }
}
<% CASE '/pricelist' %>
{
    "deleteMessage": { "message_id": {{ message.message_id }} }
},
{
    "sendMessage": {
        "text": "‚ò∑ –ß—Ç–æ–±—ã –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è:\n\n1.–í—ã–±–µ—Ä–∏ –Ω—É–∂–Ω—ã–π —Ç–∞—Ä–∏—Ñ\n2.–í–Ω–µ—Å–∏ –ø–ª–∞—Ç–µ–∂\n3.–ò –ø–æ–ª—É—á–∏ –∫–ª—é—á —Å –ø—Ä–æ—Å—Ç–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –¥–ª—è —Å–≤–æ–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ üòâ\n\nüëç–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≥–æ–≤–æ—Ä—è—Ç, —á—Ç–æ –≥–æ—Ç–æ–≤—ã –ø–ª–∞—Ç–∏—Ç—å –∑–∞ —ç—Ç—É —Å–∫–æ—Ä–æ—Å—Ç—åüèéÔ∏è –∏ —É–¥–æ–±—Å—Ç–≤–æ –¥–∞–∂–µ –±–æ–ª—å—à–µ.\n‚ñ∂Ô∏è–ñ–º–∏ –Ω–∞ –Ω—É–∂–Ω—ã–π —Ç–∞—Ä–∏—Ñüëá",
        "reply_markup" : {
            "inline_keyboard": [
                {{ FOR item IN ref(service.api_price_list) }}
                [
                    {
                        "text": "{{ item.name }} - {{ item.cost }} —Ä—É–±/–º–µ—Å.",
                        "callback_data": "/serviceorder {{ item.service_id }}"
                    }
                ],
                {{ END }}
                [
                    {
                        "text": "‚á¶ –ù–∞–∑–∞–¥",
                        "callback_data": "/menu"
                    }
                ]
            ]
        }
    }
}
<% CASE '/serviceorder' %>
{
    "deleteMessage": { "message_id": {{ message.message_id }} }
},
{
    "shmServiceOrder": {
        "service_id": "{{ args.0 }}",
        "callback_data": "/list",
        "cb_not_enough_money": "/balance",
        "error": "–û–®–ò–ë–ö–ê"
    }
}
<% CASE '/download_qr' %>
{
    "uploadDocumentFromStorage": {
        "name": "vpn{{ args.0 }}",
        "filename": "vpn{{ args.0 }}.conf"
    }
}
<% CASE '/show_qr' %>
{
    "uploadPhotoFromStorage": {
        "name": "vpn{{ args.0 }}",
        "format": "qr_code_png"
    }
}
<% CASE '/delete' %>
{
    "deleteMessage": { "message_id": {{ message.message_id }} }
},
{
    "sendMessage": {
        "text": "ü§î <b>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É–¥–∞–ª–µ–Ω–∏–µ —É—Å–ª—É–≥–∏. –£—Å–ª—É–≥—É –Ω–µ–ª—å–∑—è –±—É–¥–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å!</b>",
        "reply_markup" : {
            "inline_keyboard": [
                [
                    {
                        "text": "üß® –î–ê, –£–î–ê–õ–ò–¢–¨! üî•",
                        "callback_data": "/delete_confirmed {{ args.0 }}"
                    }
                ],
                [
                    {
                        "text": "‚á¶ –ù–∞–∑–∞–¥",
                        "callback_data": "/list"
                    }
                ]
            ]
        }
    }
}
<% CASE '/delete_confirmed' %>
{
    "deleteMessage": { "message_id": {{ message.message_id }} }
},
{
    "shmServiceDelete": {
        "usi": "{{ args.0 }}",
        "callback_data": "/list",
        "error": "–û–®–ò–ë–ö–ê"
    }
}
<% CASE '/pays' %>
{
    "sendMessage": {
        "text": "–ü–ª–∞—Ç–µ–∂–∏",
        "reply_markup" : {
            "inline_keyboard": [
                {{ FOR item IN ref(user.pays.list_for_api('limit', 5)) }}
                [
                    {
                        "text": "–î–∞—Ç–∞: {{ item.date }}, –°—É–º–º–∞: {{ item.money }} —Ä—É–±.",
                        "callback_data": "/menu"
                    }
                ],
                {{ END }}
                [
                    {
                        "text": "‚á¶ –ù–∞–∑–∞–¥",
                        "callback_data": "/menu"
                    }
                ]
            ]
        }
    }
}


<% CASE '/show_mz_keys' %>
{{ subscription_url = storage.read('name','vpn_mrzb_' _ args.0 ).subscription_url }}
{
    "printQrCode": {
        "data": "{{ subscription_url }}",
        "parameters": {
            "parse_mode": "HTML",
            "caption": "<b>Subscription URL:</b>\n<code>{{ subscription_url }}</code>"
        }
    }
},
{{ trojan = storage.read('name','vpn_mrzb_' _ args.0 ).links.grep('^trojan:').first }}
{
    "printQrCode": {
        "data": "{{ trojan }}",
        "parameters": {
            "parse_mode": "HTML",
            "caption": "<b>Troayn TCP:</b>\n<code>{{ trojan }}</code>"
        }
    }
},
{{ vless_grpc = storage.read('name','vpn_mrzb_' _ args.0 ).links.grep('^vless:').last }}
{
    "printQrCode": {
        "data": "{{ vless_grpc }}",
        "parameters": {
            "parse_mode": "HTML",
            "caption": "<b>VLESS GRPC:</b>\n<code>{{ vless_grpc }}</code>"
        }
    }
},
{
  "deleteMessage": { "message_id": {{ message.message_id }} }
},

{
  "sendMessage": {
    "text": "–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —É—Å–ª—É–≥–µ",
    "reply_markup": {
      "inline_keyboard": [
        [
          {
            "text": " –ù–∞–∑–∞–¥",
            "callback_data": "/service {{ args.0 }}"
          }
        ]
      ]
    }
  }
}

<% CASE '/info' %>
{
    "sendMessage": {
        "parse_mode":"HTML",
        "text": "<b>User-id</b>: {{ user.id }}\n<b>Login</b>: {{ user.login }}\n<b>Chat-id</b>: {{ message.chat.id }}\n<b>Chat-username</b>: {{ message.chat.username }}"
    }
}


<% CASE ['/sup', 'üñ• –ß–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏'] %>
{
    "deleteMessage": { "message_id": {{ message.message_id }} }
},
{
    "sendMessage": {
        "text":"üñ• –ß–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏",
        "parse_mode": "HTML",
        "reply_markup" : {
            "inline_keyboard": [
                [
					{
                        "text": "üñ• –ß–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏",
                            "url": "https://t.me/supservru/7"
                    }
					
                ]
            ]
        }
    }
}

<% CASE ['/help', '/menu', 'üì° –ü–æ–º–æ—â—å'] %>
{{ IF cmd == '/menu' OR cmd == 'üåç –ì–ª–∞–≤–Ω–æ–µ –ú–µ–Ω—é' }}
{
    "deleteMessage": { "message_id": {{ message.message_id }} }
},
{{ END }}
{
    "sendMessage": {
        "text":"üì° –í—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç –∫–æ—Ç–æ—Ä—ã–π –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç!",
        "parse_mode": "HTML",
        "reply_markup": {
            "keyboard": [
                [
                     {"text": "üñ• –ß–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏"},
                    {"text": "üñ• –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è Xray-Core"}
                ],
				[
                    {"text": "üñ• –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è WG"}
                ],
                [
                    {"text": "üåç –ì–ª–∞–≤–Ω–æ–µ –ú–µ–Ω—é"}
                ]
            ],
            "one_time_keyboard": false,
            "resize_keyboard": true
        }
    }
}


<% CASE ['/xray', 'üñ• –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è Xray-Core'] %>
{
    "deleteMessage": { "message_id": {{ message.message_id }} }
},
{
    "sendPhoto": {
        "photo": "https://play-lh.googleusercontent.com/EU8VQ3e2Ylty9w1_TQWh74X0jh37kBNNLKsFDH6DWc9_W7hjGR-tA1DP51-E6lc1hA=w240-h480-rw",
        "protect_content": "true",
        "parse_mode":"HTML",
        "caption": "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è Android:\n\n1Ô∏è‚É£ –ù–∞–∂–º–∏ –Ω–∞ –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞ (‚òùÔ∏è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å vless://)\n2Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ <a href=\"{{ config.apk.download }}\">üåêServRU Andriod</a>,<a href=\"https://apps.apple.com/us/app/v2rayng/id1661166628\">üåê V2rayNG IOS</a>,\n3Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º–º—É Outline –∏ –≤—Å—Ç–∞–≤—å –∫–ª—é—á\n4Ô∏è‚É£ –ù–∞–∂–º–∏ <b>'–ü–æ–¥–∫–ª—é—á–∏—Ç—Å—è'</b> –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Å—è –≤—ã—Å–æ–∫–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å—é ",
        "reply_markup" : {
            "inline_keyboard": [
                [
                    {
                        "text": "üñ• –ß–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏",
                        "url": "https://t.me/supservru"
                    },
					{
                        "text": "üöÄ –°–ø–∏—Å–æ–∫ VPN –∫–ª—é—á–µ–π",
                        "callback_data": "/list"
                    }
					],
                [
                    {
                        "text": "‚á¶ –ù–∞–∑–∞–¥",
                        "callback_data": "/menu"
                    }
                ]
            ]
        }
    }
}

<% CASE ['/wg', 'üñ• –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è WG'] %>
{
    "deleteMessage": { "message_id": {{ message.message_id }} }
},
{
    "sendPhoto": {
        "photo": "https://yt3.googleusercontent.com/ytc/AOPolaTkYCi7Pm1bLJyy9BHDPAZaOwrZhs0CiZZ6go-I=s900-c-k-c0x00ffffff-no-rj",
        "protect_content": "true",
        "parse_mode":"HTML",
        "caption": "1Ô∏è‚É£  –°–∫–∞—á–∞–π—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ WireGuard –∫ —Å–µ–±–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ. –°–∫–∞—á–∞—Ç—å –¥–ª—è <a href=\"https://apps.apple.com/us/app/wireguard/id1441195209\">iPhone</a>, <a href=\"https://play.google.com/store/apps/details?id=com.wireguard.android\">Android</a>, <a href=\"https://apps.apple.com/us/app/wireguard/id1451685025\">Mac</a>.\n\n2Ô∏è‚É£ –í —Ä–∞–∑–¥–µ–ª–µ \"–ö–ª—é—á–∏\" –Ω–∞–∂–º–∏—Ç–µ \"–ù–æ–≤—ã–π –∫–ª—é—á\" –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π –≤–∞–º.\n\n3Ô∏è‚É£  –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã —Å–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è WireGuard. –ù–∞—Ö–æ–¥—è—Å—å –≤ –º–µ–Ω—é \"–ö–ª—é—á–∏\" –≤—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π –∫–ª—é—á, –∫–ª–∏–∫–Ω—É–≤ –ø–æ –Ω–µ–º—É. –î–∞–ª–µ–µ —Å–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª –∫–ª—é—á–∞ –∏ –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ WireGuard.",
        "reply_markup" : {
            "inline_keyboard": [
                [
                    {
                        "text": "üñ• –ß–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏",
                        "url": "https://t.me/supservru"
                    },
					{
                        "text": "üöÄ –°–ø–∏—Å–æ–∫ VPN –∫–ª—é—á–µ–π",
                        "callback_data": "/list"
                    }
					],
                [
                    {
                        "text": "‚á¶ –ù–∞–∑–∞–¥",
                        "callback_data": "/menu"
                    }
                ]
            ]
        }
    }
}

<% CASE '/tests' %>
{
    "deleteMessage": { "message_id": {{ message.message_id }} }
},
{
    "sendMessage": {
        "text": "üöÄ <b>{{ user.full_name }}!</b> –í—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á –∏–ª–∏ –ø—Ä–æ–¥–ª–∏—Ç—å –æ–¥–∏–Ω –∏–∑ –∏–º–µ—é—â–∏—Ö—Å—è?",
        "reply_markup" : {
            "inline_keyboard": [
                {{ FOR item IN ref( user.services.list_for_api( 'category', 'vpn-mz-test-%' ) ) }}
                {{ SWITCH item.status }}
                  {{ CASE 'ACTIVE' }}
                  {{ icon = '‚úÖ' }}
                  {{ status = '–†–∞–±–æ—Ç–∞–µ—Ç' }}
                  {{ CASE 'BLOCK' }}
                  {{ icon = '‚ùå' }}
                  {{ status = '–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞' }}
                  {{ CASE 'NOT PAID' }}
                  {{ icon = 'üí∞' }}
                  {{ status = '–û–∂–∏–¥–∞–µ—Ç –æ–ø–ª–∞—Ç—ã' }}
                  {{ CASE }}
                  {{ icon = '‚è≥' }}
                  {{ status = '–û–±—Ä–∞–±–æ—Ç–∫–∞' }}
                {{ END }}
                [
                    {
                        "text": "{{ item.name }} - {{ icon }} {{ status }} {{ end_date }}",
                        "callback_data": "/service {{ item.user_service_id }}"
                    }
                ],
                {{ END }}
                [
                    {
                        "text": "‚úö –ö—É–ø–∏—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á",
                        "callback_data": "/pricelist"
                    }
                ],
                [
                    {
                        "text": "‚á¶ –ù–∞–∑–∞–¥",
                        "callback_data": "/menu"
                    }
                ]
            ]
        }
    }
}


<% CASE ['/test', '‚ò¢ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –£—Å–ª—É–≥–∏'] %>
{
    "deleteMessage": { "message_id": {{ message.message_id }} }
},
{
    "sendMessage": {
        "text": "‚ò∑ –ß—Ç–æ–±—ã –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è:\n\n<b>1) –í—ã–±–∏—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏—é –ø–æ–¥ –≤–∞—Å –ª–æ–∫–∞—Ü–∏—é</b>\n<b>2) –ò –ø–æ–ª—É—á–∏ –∫–ª—é—á —Å –ø—Ä–æ—Å—Ç–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –¥–ª—è —Å–≤–æ–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ üòâ</b>\n\nüëç–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≥–æ–≤–æ—Ä—è—Ç, —á—Ç–æ –≥–æ—Ç–æ–≤—ã –ø–ª–∞—Ç–∏—Ç—å –∑–∞ —ç—Ç—É —Å–∫–æ—Ä–æ—Å—Ç—åüèéÔ∏è –∏ —É–¥–æ–±—Å—Ç–≤–æ –¥–∞–∂–µ –±–æ–ª—å—à–µ.\n<b>‚ñ∂ Ô∏è–ñ–º–∏ –Ω–∞ –Ω—É–∂–Ω—ã–π —Ç–∞—Ä–∏—Ñ üëá</b>",
        "reply_markup" : {
            "inline_keyboard": [
                {{ FOR item IN ref( service.api_price_list( 'category', 'vpn-mz-test-%' ) ) }}
                [
                    {
                        "text": "{{ item.name }} - {{ item.cost }} —Ä—É–±/–º–µ—Å.",
                        "callback_data": "/serviceorder {{ item.service_id }}"
                    }
                ],
				[
                    {
                        "text": "üöÄ –¢–µ—Å—Ç–æ–≤—ã–µ –£—Å–ª—É–≥–∏",
                        "callback_data": "/tests"
                    }
                ],
                {{ END }}
                [
                    {
                        "text": "‚á¶ –ù–∞–∑–∞–¥",
                        "callback_data": "/menu"
                    }
                ]
            ]
        }
    }
}

<% CASE ['/referrals', 'ü§ù –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞'] %>
{
    "sendMessage": {
        "text": "ü§ù –ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞\n\n–ü—Ä–∏–≤–æ–¥–∏ –¥—Ä—É–∑–µ–π –∏ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π {{ config.billing.partner.income_percent }}% —Å –∏—Ö –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–π\n\n‚¨áÔ∏èÔ∏è –¢–≤–æ—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞:\n‚îî https://t.me/servruvpn_bot?start={{ user.id }}\n\nüèÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n‚îú –ü—Ä–∏–≤–µ–¥–µ–Ω–æ –¥—Ä—É–∑–µ–π: {{ user.referrals_count }}\n‚îî –î–æ—Å—Ç—É–ø–Ω–æ –∫ –≤—ã–≤–æ–¥—É: {{ user.get_bonus }} ‚ÇΩ",
        "reply_markup": {
            "inline_keyboard": [
                [
                    {
                        "text": "–ù–∞–∑–∞–¥...",
                        "callback_data": "/menu"
                    }
                ]
            ]
        }
    }
}
<% CASE ['/about', 'üöÄ –û –°–µ—Ä–≤–∏—Å–µ'] %>
{
    "deleteMessage": { "message_id": {{ message.message_id }} }
},
{
     "sendPhoto": {
        "photo": "https://sun9-67.userapi.com/impg/_Dda2_prlnWOWx8AOThq7SpcUa-CZo35ICgLdQ/adNqp7zUhis.jpg?size=628x1280&quality=95&sign=b1fb8d6e0d0bd04d9225b35adabf7611&type=album",
        "protect_content": "true",
        "parse_mode":"HTML",
        "caption": "üåê –í–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ –∏–¥—ë—Ç —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –î–∞—Ç–∞—Ü–µ–Ω—Ç—Ä–µ. –ù–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è, –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –∏ –∑–∞—â–∏—â—ë–Ω —Å–∫–≤–æ–∑–Ω—ã–º —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º - —Å–ø–æ–∫–æ–π–Ω–æ –≤–≤–æ–¥–∏ –ª–æ–≥–∏–Ω—ã/–ø–∞—Ä–æ–ª–∏ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–π –ª–∏—á–Ω—ã–µ —Ñ–∞–π–ª—ã, –æ–Ω–∏ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏\n\n ‚úàÔ∏è –°–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ —Å–µ—Ä–≤–µ—Ä–∞ 10 Gb/—Å–µ–∫, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞–ª–æ–∂–µ–Ω—ã —Ç–∞—Ä–∏—Ñ–æ–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞. –í –ø—Ä–∏–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç Speedtest-–∞: –∑–µ–ª—ë–Ω—ã–π —Å–ª–∞–π–¥ - —Å–∫–æ—Ä–æ—Å—Ç—å —Å–∫–∞—á–∏–≤–∞–Ω–∏—è, —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π - –∑–∞–≥—Ä—É–∑–∫–∏\n\n‚úÖÔ∏è–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –Ω–∞ —Å–≤–æ–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ —Ç—ã —Å–º–æ–∂–µ—à—å –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è VPN\n\nüìç –¢–≤–æ–π –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π IP-–∞–¥—Ä–µ—Å - –¥–∞—ë—Ç —Å–Ω–∏–∂–µ–Ω–∏–µ —Ä–∏—Å–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –∏–∑-–∑–∞ —á–∞—Å—Ç–æ–π —Å–º–µ–Ω—ã IP",
        "reply_markup" : {
            "inline_keyboard": [
                [
                   
                ]
            ]
        }
    }
},
{
    "deleteMessage": { "message_id": {{ message.message_id }} }
},
{
    "sendMessage": {
        "text": "‚úÖ–î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –Ω–∞–∂–∞—Ç—å –æ–¥–Ω–æ–∏–º–µ–Ω–Ω—É—é –∫–Ω–æ–ø–∫—É.\n\n–£ —Ç–µ–±—è –±—É–¥–µ—Ç 2 –¥–Ω—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, —á—Ç–æ–±—ã –æ—Ü–µ–Ω–∏—Ç—å –µ–≥–æ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–µ—Ä–µ–¥ –æ–±—ã—á–Ω—ã–º–∏ VPN –∏–∑ AppStore –∏–ª–∏ Google Play\n\n–ï—Å–ª–∏ –∑–Ω–∞–µ—à—å VPN –ª—É—á—à–µ, —Å–æ–æ–±—â–∏ –≤ —á–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏: <a href=\"https://t.me/supservru/7\">SupServRU VPN</a>"
    }
},
{
    "deleteMessage": { "message_id": {{ message.message_id }} }
},
{
    "sendMessage": {
        "text": "–ü–æ—á–µ–º—É VPN –ø–ª–∞—Ç–Ω—ã–π? \n\n\n–ù–µ —Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ —è —Ç—Ä–∞—á—É –≤—Å—ë —Å–≤–æ—ë –ª–∏—á–Ω–æ–µ –≤—Ä–µ–º—èüïó –Ω–∞ —É–ª—É—á—à–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞, –º–Ω–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:\n\n‚úÖ–û–ø–ª–∞—á–∏–≤–∞—Ç—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –≤ –¥–∞—Ç–∞—Ü–µ–Ω—Ç—Ä–µ —Å –±–æ–ª—å—à–æ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é 10Gb/süì∂\n‚úÖ–ò –±—ã—Ç—å –Ω–∞ —Å–≤—è–∑–∏ —Å–æ —Å–≤–æ–∏–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏ 24/7"
    }
}
<% END %>
